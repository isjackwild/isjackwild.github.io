(function(){var a,b;console.log("'Allo from CoffeeScript!"),a=["landscape-1.jpg","landscape-2.jpg","portrait-1.jpg","portrait-2.jpg","widescreen-1.jpg","square-1.jpg"],$(".left-context").on("mouseenter",function(){return $("body").addClass("mouseover-menu")}),$(".left-context").on("mouseleave",function(){return $("body").removeClass("mouseover-menu")}),$(".image-wrap").on("click",function(b){var c,d;return d=Math.floor(Math.random()*a.length),c="images/"+a[d],$(b.currentTarget).find("img")[0].src=c,c.indexOf("portrait")>=0?$(b.currentTarget).addClass("portrait"):$(b.currentTarget).removeClass("portrait")}),Gator(document).on("click","a.history-link",function(a){var c;return c=$($(a.currentTarget).children()[0]),console.log("clicked",a.currentTarget.href,"child",c),a.preventDefault(),$.ajax({url:a.currentTarget.href}).done(function(d){return b(c,d),history.pushState(null,null,a.currentTarget.href)})}),b=function(a,b){var c,d,e,f,g;return f=a.offset().left-40,g=a.offset().top,e=a.width(),c=a.height(),console.log(g,f+e,g+c,f),d=document.createElement("div"),d.className="page-context mini incoming project",d.style.clip="rect(+"+g+"px,"+(f+e)+"px,"+(g+c)+"px,"+f+"px)",$(".page-context-wrap").append(d),$(".page-context.incoming").prepend(b),setTimeout(function(){return $(".page-context.incoming").attr("style","")},10),setTimeout(function(){return $(".page-context.incoming").removeClass("mini incoming"),$(".page-context.outgoing").remove(),$(".page-context").addClass("outgoing"),d=void 0},444)}}).call(this);